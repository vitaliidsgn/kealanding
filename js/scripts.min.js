/*!

© kovrigin
Все права разрешены
красивый дизайн должен иметь красивый код®

https://github.com/htmlpluscss/

*/
window.addEventListener("load",()=>{document.documentElement.style.setProperty("--transitionDefault",".3s")}),(e=>{e.length&&[...e].forEach(e=>{let t=!1,i=null;const r=e.querySelectorAll(".accordion__item");[...r].forEach(e=>{const n=e.querySelector(".accordion__btn"),o=e.querySelector(".accordion__head"),l=e.querySelector(".accordion__body"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"viewBox","0 0 32 32"),s.setAttributeNS(null,"width",32),s.setAttributeNS(null,"height",32),s.innerHTML='<line x1="6" y1="16" x2="25" y2="16" stroke-width="1.5"/><line x1="16" y1="6" x2="16" y2="25" stroke-width="1.5"/>',o.append(s),n.addEventListener("click",()=>{t=!0,e===i?(e.classList.remove("is-open"),i=null):((i=e).querySelector(".accordion__body").style.height=i.querySelector(".accordion__body-inner").offsetHeight+"px",[...r].forEach(t=>t.classList.toggle("is-open",t===e)))}),l.addEventListener("transitionend",()=>{const e=o.getBoundingClientRect(),r=e.top>=0&&e.bottom<=window.innerHeight;t&&i&&!1===r&&o.scrollIntoView({behavior:"smooth"}),t=!1})})})})(document.querySelectorAll(".accordion")),(e=>{if(!e.length)return;const t=e=>{const t=Math.floor(e/60),i=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},i=e=>!e.paused&&e.currentTime>0&&!e.ended,r=(e,i)=>e.querySelector(".audio-player__time-total").textContent=t(i.duration);[...e].forEach(e=>{let n=null,o=null,l=null;const s=document.createElement("div"),a=document.createElement("div"),d=document.createElement("button"),c=document.createElement("button"),u=e.querySelectorAll(".swiper-slide").length,p=e.classList.contains("swiper--can-use"),w=e.classList.contains("swiper--example");if(s.className="swiper-pagination",a.className="swiper-navigation",c.className="swiper-button-prev button",d.className="swiper-button-next button",c.setAttribute("aria-label","Previous slide"),d.setAttribute("aria-label","Next slide"),c.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24"><path fill-rule="evenodd" d="m14.469 19.53 1.06-1.06L9.06 12l6.47-6.47-1.06-1.06L6.939 12l7.53 7.53Z" clip-rule="evenodd"/></svg>',d.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24"><path fill-rule="evenodd" d="m9.531 19.53-1.06-1.06L14.94 12 8.47 5.53l1.06-1.06L17.06 12l-7.53 7.53Z" clip-rule="evenodd"/></svg>',a.append(c),a.append(d),e.append(a),e.append(s),l=(()=>{n&&(n.destroy(!1,!0),n=void 0),s.classList.add("hide"),a.classList.add("hide"),e.closest(".swiper-style")&&e.closest(".swiper-style").classList.remove("swiper-style")}),w){const n=document.querySelector("#audio-player-template").innerHTML,l=parseInt(e.getAttribute("data-start-slide"))-1;let a=u/2;window.addEventListener("load",()=>{[...e.querySelectorAll(".audio-player")].forEach(e=>r(e,e.querySelector("audio")))}),[...e.querySelectorAll(".audio-player")].forEach(o=>{o.insertAdjacentHTML("beforeend",n);const l=o.querySelector("audio"),s=o.querySelector(".audio-player__btn"),a=o.querySelector(".audio-player__buffered"),d=o.querySelector(".audio-player__progress");l.addEventListener("loadedmetadata",()=>r(o,l)),l.preload="metadata",l.addEventListener("timeupdate",()=>{r(o,l),s.classList.toggle("is-pause",!i(l));const e=l.duration,n=l.currentTime;if(d.style.width=n/e*100+"%",l.buffered.length>0){const t=l.buffered.end(l.buffered.length-1);isNaN(e)||(a.style.width=t/e*100+"%")}o.querySelector(".audio-player__time-current").textContent=t(n)}),s.addEventListener("click",()=>{[...e.querySelectorAll("audio")].forEach(e=>{l===e?l.paused?l.play():l.pause():e.pause(),e.closest(".audio-player").querySelector(".audio-player__btn").classList.toggle("is-pause",!i(e))})}),o.querySelector(".audio-player__time-current").textContent=t(l.currentTime)}),s.classList.add("hide"),o=(()=>{new Swiper(e,{loop:!0,initialSlide:l,slidesPerView:"auto",centeredSlides:!0,slideToClickedSlide:!0,navigation:{nextEl:d,prevEl:c},on:{slideChangeTransitionEnd:()=>{[...e.querySelectorAll("audio")].forEach(e=>{const t=e.closest(".swiper-slide");!1===t.classList.contains("swiper-slide-active")&&(e.pause(),t.querySelector(".audio-player__btn").classList.add("is-pause"))}),e.swiper&&(e.swiper.loopFix(),a=u/2)},loopFix:()=>{e.swiper&&.5!==e.swiper.progress&&a>0&&(a--,e.swiper.loopFix())}}})})}if(p){let t=0;o=(()=>{l(),window.innerWidth<1200&&(e.parentNode.classList.add("swiper-style"),a.classList.remove("hide"),n=new Swiper(e,{loop:!0,autoHeight:!0,initialSlide:t,navigation:{nextEl:d,prevEl:c},on:{slideChange(){n&&(t=n.realIndex)}}}))}),e.addEventListener("swiperResize",o)}e.addEventListener("swiperJsLoad",o)});let n=null,o=window.innerWidth;window.addEventListener("resize",()=>{window.requestAnimationFrame(()=>{null===n&&(n=setTimeout(()=>{n=null,o!==window.innerWidth&&(o=window.innerWidth,window.Swiper&&[...e].forEach(e=>e.dispatchEvent(new Event("swiperResize"))))},1e3))})});const l=document.createElement("script");l.src="/js/swiper-bundle.min.js",l.onload=(()=>[...e].forEach(e=>e.dispatchEvent(new Event("swiperJsLoad")))),document.head.append(l)})(document.querySelectorAll(".swiper"));